<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>回到顶部</title>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <style>
        p {
            margin-top: 100px;
            line-height: 3;
            font-weight: bold;
            text-indent: 30px;
        }

        #go-top {
            position: fixed;
            bottom: 10px;
            right: 10px;
            border: 1px solid red;
            padding: 10px;
            cursor: pointer;
            display: none;
        }
    </style>
</head>
<body>
<p>1</p>
<p>2</p>
<p>3</p>
<p>4</p>
<p>5</p>
<p>6</p>
<p>7</p>
<p>8</p>
<p>9</p>
<p>10</p>
<p>11</p>
<p>12</p>
<p>13</p>
<p>14</p>
<p>15</p>
<p>16</p>
<p>17</p>
<p class="eighteen">18</p>
<script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.js"></script>
<script>
    /*
     var GoTop = {
     init: function () {
     if ($('#go-top').length > 0) {
     return;
     }
     var $goTop = $('<div id="go-top">回到顶部</div>');
     $('body').append($goTop);
     this.$goTop = $goTop;
     this.bind();

     },
     bind: function () {
     var self = this;
     var winH = $(window).height();
     //            console.log(winH);
     var eighteenH = $('.eighteen').offset().top;
     //            console.log(eighteenH);
     $(window).on('scroll', function (e) {
     var offsetTop = $('body').scrollTop();
     //                console.log(offsetTop);
     if (eighteenH < (winH + offsetTop)) {
     self.$goTop.show();
     } else {
     self.$goTop.hide();
     }
     })
     self.$goTop.on('click', function () {
     $(window).scrollTop(0);
     });
     }
     }
     */

    //    用了立即执行函数表达式，还有js函数节流
    var GoTop = (function () {
        var $goTop = $('<div id="go-top">回到顶部</div>');
        console.log('创建了goTop');
        $('body').append($goTop);

        function init() {
            var clock;

            $(window).on('scroll', function (e) {
                var winH = $(window).height();
                var eighteenH = $('.eighteen').offset().top;
                var offsetTop = $('body').scrollTop();
                if (clock){
                    clearTimeout();
                }
                clock = setTimeout(function () {
                    if (eighteenH < (winH + offsetTop)) {

                        $goTop.show();
                    } else {
                        $goTop.hide();
                    }
                    console.log(offsetTop);
                },500);

            })
            $goTop.on('click', function () {
                $(window).scrollTop(0);
            });
        }

        return {
            init: init
        }
    })();


    GoTop.init();


    GoTop.init();


</script>


</body>
</html>